<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FangDootle Browser</title>
<style>
  body { margin: 0; font-family: sans-serif; display: flex; flex-direction: column; height: 100vh; }
  header { background: #4a90e2; color: white; text-align: center; padding: 15px; font-size: 1.5rem; }
  .search-bar { display: flex; margin: 10px auto; max-width: 600px; width: 90%; }
  .search-bar input { flex: 1; padding: 10px; font-size: 1rem; border: 2px solid #ddd; border-radius: 5px 0 0 5px; }
  .search-bar button { padding: 10px; font-size: 1rem; border: none; background: #4a90e2; color: white; border-radius: 0 5px 5px 0; cursor: pointer; }
  #results { flex: 1; overflow-y: auto; padding: 10px; }
  .result { margin-bottom: 15px; }
  .result a { text-decoration: none; color: #1a0dab; font-size: 1.1rem; }
  .result p { color: #545454; margin: 5px 0 0; font-size: 0.9rem; }
</style>
</head>
<body>

<header>FangDootle Browser</header>

<div class="search-bar">
  <input type="text" id="searchInput" placeholder="Search DuckDuckGo...">
  <button id="searchBtn">Search</button>
</div>

<div id="results">
  <p>Type a search query and press Enter or click Search.</p>
</div>

<script>
const searchInput = document.getElementById('searchInput');
const searchBtn = document.getElementById('searchBtn');
const resultsDiv = document.getElementById('results');

async function searchDuckDuckGo(query) {
  const url = `https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json&pretty=1`;
  try {
    const response = await fetch(url);
    const data = await response.json();
    displayResults(data);
  } catch (err) {
    resultsDiv.innerHTML = `<p style="color:red;">Error fetching results.</p>`;
    console.error(err);
  }
}

function displayResults(data) {
  resultsDiv.innerHTML = '';
  // Use RelatedTopics or AbstractText if available
  if (data.RelatedTopics && data.RelatedTopics.length > 0) {
    data.RelatedTopics.forEach(item => {
      if(item.Text && item.FirstURL){
        const div = document.createElement('div');
        div.classList.add('result');
        div.innerHTML = `<a href="${item.FirstURL}" target="_blank">${item.Text}</a>`;
        resultsDiv.appendChild(div);
      }
    });
  } else if (data.AbstractText) {
    resultsDiv.innerHTML = `<div class="result"><p>${data.AbstractText}</p></div>`;
  } else {
    resultsDiv.innerHTML = `<p>No results found.</p>`;
  }
}

function handleSearch() {
  const query = searchInput.value.trim();
  if(query) searchDuckDuckGo(query);
}

searchBtn.addEventListener('click', handleSearch);
searchInput.addEventListener('keypress', e => {
  if(e.key === 'Enter') handleSearch();
});
</script>

</body>
</html>
